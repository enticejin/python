{"id":"DHWK","dependencies":[{"name":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js.map","includedInParent":true,"mtime":499162500000},{"name":"D:\\python\\openlayers6.0\\node_modules\\ol\\src\\Image.js","includedInParent":true,"mtime":499162500000},{"name":"D:\\python\\openlayers6.0\\package.json","includedInParent":true,"mtime":1589018372439},{"name":"D:\\python\\openlayers6.0\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1587440291364},{"name":"./ImageBase.js","loc":{"line":17,"column":22},"parent":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js","resolved":"D:\\python\\openlayers6.0\\node_modules\\ol\\ImageBase.js"},{"name":"./ImageState.js","loc":{"line":18,"column":23},"parent":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js","resolved":"D:\\python\\openlayers6.0\\node_modules\\ol\\ImageState.js"},{"name":"./events.js","loc":{"line":19,"column":42},"parent":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js","resolved":"D:\\python\\openlayers6.0\\node_modules\\ol\\events.js"},{"name":"./events/EventType.js","loc":{"line":20,"column":22},"parent":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js","resolved":"D:\\python\\openlayers6.0\\node_modules\\ol\\events\\EventType.js"},{"name":"./extent.js","loc":{"line":21,"column":26},"parent":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js","resolved":"D:\\python\\openlayers6.0\\node_modules\\ol\\extent.js"},{"name":"./has.js","loc":{"line":22,"column":29},"parent":"D:\\python\\openlayers6.0\\node_modules\\ol\\Image.js","resolved":"D:\\python\\openlayers6.0\\node_modules\\ol\\has.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.listenImage=h,exports.default=void 0;var t=a(require(\"./ImageBase.js\")),e=a(require(\"./ImageState.js\")),n=require(\"./events.js\"),i=a(require(\"./events/EventType.js\")),r=require(\"./extent.js\"),s=require(\"./has.js\");function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u=function(t){function n(n,i,r,s,a,o){var u=t.call(this,n,i,r,e.default.IDLE)||this;return u.src_=s,u.image_=new Image,null!==a&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=e.default.IDLE,u.imageLoadFunction_=o,u}return o(n,t),n.prototype.getImage=function(){return this.image_},n.prototype.handleImageError_=function(){this.state=e.default.ERROR,this.unlistenImage_(),this.changed()},n.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=e.default.LOADED,this.unlistenImage_(),this.changed()},n.prototype.load=function(){this.state!=e.default.IDLE&&this.state!=e.default.ERROR||(this.state=e.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=h(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},n.prototype.setImage=function(t){this.image_=t},n.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},n}(t.default);function h(t,e,r){var a=t;if(a.src&&s.IMAGE_DECODE){var o=a.decode(),u=!0;return o.then(function(){u&&e()}).catch(function(t){u&&(\"EncodingError\"===t.name&&\"Invalid image type.\"===t.message?e():r())}),function(){u=!1}}var h=[(0,n.listenOnce)(a,i.default.LOAD,e),(0,n.listenOnce)(a,i.default.ERROR,r)];return function(){h.forEach(n.unlistenByKey)}}var l=u;exports.default=l;"},"sourceMaps":{"js":{"mappings":[{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":0}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":13}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":20}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":35}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":43}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":56}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":57}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":64}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":68}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":76}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":88}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":90}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":98}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":111}},{"source":"src/Image.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":113}},{"source":"src/Image.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":117}},{"source":"src/Image.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":119}},{"source":"src/Image.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":121}},{"source":"src/Image.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":129}},{"source":"src/Image.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":148}},{"source":"src/Image.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":150}},{"source":"src/Image.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":152}},{"source":"src/Image.js","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":160}},{"source":"src/Image.js","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":180}},{"source":"src/Image.js","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":182}},{"source":"src/Image.js","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":190}},{"source":"src/Image.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":205}},{"source":"src/Image.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":207}},{"source":"src/Image.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":209}},{"source":"src/Image.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":217}},{"source":"src/Image.js","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":243}},{"source":"src/Image.js","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":245}},{"source":"src/Image.js","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":253}},{"source":"src/Image.js","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":268}},{"source":"src/Image.js","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":270}},{"source":"src/Image.js","name":null,"original":{"line":9,"column":0},"generated":{"line":1,"column":278}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":290}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":299}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":301}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":304}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":311}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":314}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":316}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":327}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":329}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":330}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":338}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":341}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":345}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":347}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":358}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":362}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":364}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":373}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":375}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":378}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":385}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":387}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":394}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":410}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":411}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":421}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":435}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":442}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":451}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":453}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":456}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":458}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":468}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":472}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":481}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":483}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":486}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":490}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":494}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":499}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":501}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":503}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":518}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":523}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":525}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":528}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":530}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":536}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":538}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":542}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":549}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":558}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":560}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":563}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":572}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":576}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":581}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":593}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":595}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":597}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":599}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":602}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":604}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":614}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":621}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":623}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":630}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":637}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":641}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":643}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":653}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":655}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":665}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":669}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":673}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":676}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":678}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":687}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":690}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":699}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":14},"generated":{"line":1,"column":701}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":22},"generated":{"line":1,"column":703}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":34},"generated":{"line":1,"column":705}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":46},"generated":{"line":1,"column":707}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":51},"generated":{"line":1,"column":709}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":64},"generated":{"line":1,"column":711}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":714}},{"source":"src/Image.js","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":718}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":720}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":722}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":4},"generated":{"line":1,"column":727}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":10},"generated":{"line":1,"column":732}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":18},"generated":{"line":1,"column":734}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":30},"generated":{"line":1,"column":736}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":42},"generated":{"line":1,"column":738}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":53},"generated":{"line":1,"column":740}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":53},"generated":{"line":1,"column":748}},{"source":"src/Image.js","name":null,"original":{"line":43,"column":58},"generated":{"line":1,"column":755}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":760}},{"source":"src/Image.js","name":null,"original":{"line":49,"column":4},"generated":{"line":1,"column":767}},{"source":"src/Image.js","name":null,"original":{"line":49,"column":9},"generated":{"line":1,"column":769}},{"source":"src/Image.js","name":null,"original":{"line":49,"column":16},"generated":{"line":1,"column":774}},{"source":"src/Image.js","name":null,"original":{"line":55,"column":4},"generated":{"line":1,"column":776}},{"source":"src/Image.js","name":null,"original":{"line":55,"column":9},"generated":{"line":1,"column":778}},{"source":"src/Image.js","name":null,"original":{"line":55,"column":18},"generated":{"line":1,"column":785}},{"source":"src/Image.js","name":null,"original":{"line":55,"column":22},"generated":{"line":1,"column":789}},{"source":"src/Image.js","name":null,"original":{"line":56,"column":24},"generated":{"line":1,"column":795}},{"source":"src/Image.js","name":null,"original":{"line":56,"column":8},"generated":{"line":1,"column":802}},{"source":"src/Image.js","name":null,"original":{"line":57,"column":6},"generated":{"line":1,"column":806}},{"source":"src/Image.js","name":null,"original":{"line":57,"column":11},"generated":{"line":1,"column":808}},{"source":"src/Image.js","name":null,"original":{"line":57,"column":18},"generated":{"line":1,"column":815}},{"source":"src/Image.js","name":null,"original":{"line":57,"column":32},"generated":{"line":1,"column":827}},{"source":"src/Image.js","name":null,"original":{"line":64,"column":4},"generated":{"line":1,"column":830}},{"source":"src/Image.js","name":null,"original":{"line":64,"column":9},"generated":{"line":1,"column":832}},{"source":"src/Image.js","name":null,"original":{"line":64,"column":21},"generated":{"line":1,"column":842}},{"source":"src/Image.js","name":null,"original":{"line":70,"column":4},"generated":{"line":1,"column":847}},{"source":"src/Image.js","name":null,"original":{"line":70,"column":9},"generated":{"line":1,"column":849}},{"source":"src/Image.js","name":null,"original":{"line":70,"column":17},"generated":{"line":1,"column":855}},{"source":"src/Image.js","name":null,"original":{"line":70,"column":28},"generated":{"line":1,"column":857}},{"source":"src/Image.js","name":null,"original":{"line":70,"column":28},"generated":{"line":1,"column":865}},{"source":"src/Image.js","name":null,"original":{"line":76,"column":4},"generated":{"line":1,"column":870}},{"source":"src/Image.js","name":null,"original":{"line":76,"column":9},"generated":{"line":1,"column":872}},{"source":"src/Image.js","name":null,"original":{"line":76,"column":30},"generated":{"line":1,"column":891}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":893}},{"source":"src/Image.js","name":null,"original":{"line":151,"column":0},"generated":{"line":1,"column":895}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":27},"generated":{"line":1,"column":902}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":27},"generated":{"line":1,"column":904}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":27},"generated":{"line":1,"column":906}},{"source":"src/Image.js","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":909}},{"source":"src/Image.js","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":911}},{"source":"src/Image.js","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":921}},{"source":"src/Image.js","name":null,"original":{"line":84,"column":2},"generated":{"line":1,"column":930}},{"source":"src/Image.js","name":null,"original":{"line":85,"column":11},"generated":{"line":1,"column":941}},{"source":"src/Image.js","name":null,"original":{"line":85,"column":11},"generated":{"line":1,"column":948}},{"source":"src/Image.js","name":null,"original":{"line":85,"column":16},"generated":{"line":1,"column":953}},{"source":"src/Image.js","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":961}},{"source":"src/Image.js","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":963}},{"source":"src/Image.js","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":973}},{"source":"src/Image.js","name":null,"original":{"line":93,"column":2},"generated":{"line":1,"column":991}},{"source":"src/Image.js","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":1002}},{"source":"src/Image.js","name":null,"original":{"line":94,"column":9},"generated":{"line":1,"column":1007}},{"source":"src/Image.js","name":null,"original":{"line":94,"column":17},"generated":{"line":1,"column":1013}},{"source":"src/Image.js","name":null,"original":{"line":94,"column":28},"generated":{"line":1,"column":1015}},{"source":"src/Image.js","name":null,"original":{"line":94,"column":28},"generated":{"line":1,"column":1023}},{"source":"src/Image.js","name":null,"original":{"line":95,"column":9},"generated":{"line":1,"column":1029}},{"source":"src/Image.js","name":null,"original":{"line":95,"column":9},"generated":{"line":1,"column":1034}},{"source":"src/Image.js","name":null,"original":{"line":96,"column":9},"generated":{"line":1,"column":1051}},{"source":"src/Image.js","name":null,"original":{"line":96,"column":9},"generated":{"line":1,"column":1056}},{"source":"src/Image.js","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1067}},{"source":"src/Image.js","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1069}},{"source":"src/Image.js","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1079}},{"source":"src/Image.js","name":null,"original":{"line":104,"column":2},"generated":{"line":1,"column":1096}},{"source":"src/Image.js","name":null,"original":{"line":105,"column":28},"generated":{"line":1,"column":1112}},{"source":"src/Image.js","name":null,"original":{"line":105,"column":8},"generated":{"line":1,"column":1116}},{"source":"src/Image.js","name":null,"original":{"line":105,"column":13},"generated":{"line":1,"column":1121}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":11},"generated":{"line":1,"column":1134}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":11},"generated":{"line":1,"column":1139}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":24},"generated":{"line":1,"column":1151}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":34},"generated":{"line":1,"column":1153}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":34},"generated":{"line":1,"column":1155}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":34},"generated":{"line":1,"column":1166}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":39},"generated":{"line":1,"column":1171}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":49},"generated":{"line":1,"column":1179}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":54},"generated":{"line":1,"column":1184}},{"source":"src/Image.js","name":null,"original":{"line":106,"column":61},"generated":{"line":1,"column":1191}},{"source":"src/Image.js","name":null,"original":{"line":108,"column":9},"generated":{"line":1,"column":1199}},{"source":"src/Image.js","name":null,"original":{"line":108,"column":9},"generated":{"line":1,"column":1204}},{"source":"src/Image.js","name":null,"original":{"line":108,"column":17},"generated":{"line":1,"column":1210}},{"source":"src/Image.js","name":null,"original":{"line":108,"column":28},"generated":{"line":1,"column":1212}},{"source":"src/Image.js","name":null,"original":{"line":108,"column":28},"generated":{"line":1,"column":1220}},{"source":"src/Image.js","name":null,"original":{"line":109,"column":9},"generated":{"line":1,"column":1227}},{"source":"src/Image.js","name":null,"original":{"line":109,"column":9},"generated":{"line":1,"column":1232}},{"source":"src/Image.js","name":null,"original":{"line":110,"column":9},"generated":{"line":1,"column":1249}},{"source":"src/Image.js","name":null,"original":{"line":110,"column":9},"generated":{"line":1,"column":1254}},{"source":"src/Image.js","name":null,"original":{"line":120,"column":2},"generated":{"line":1,"column":1265}},{"source":"src/Image.js","name":null,"original":{"line":120,"column":2},"generated":{"line":1,"column":1267}},{"source":"src/Image.js","name":null,"original":{"line":120,"column":2},"generated":{"line":1,"column":1277}},{"source":"src/Image.js","name":null,"original":{"line":120,"column":2},"generated":{"line":1,"column":1282}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":8},"generated":{"line":1,"column":1293}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":13},"generated":{"line":1,"column":1298}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":22},"generated":{"line":1,"column":1305}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":33},"generated":{"line":1,"column":1307}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":33},"generated":{"line":1,"column":1315}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":41},"generated":{"line":1,"column":1321}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":46},"generated":{"line":1,"column":1326}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":55},"generated":{"line":1,"column":1333}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":66},"generated":{"line":1,"column":1335}},{"source":"src/Image.js","name":null,"original":{"line":121,"column":66},"generated":{"line":1,"column":1343}},{"source":"src/Image.js","name":null,"original":{"line":122,"column":11},"generated":{"line":1,"column":1351}},{"source":"src/Image.js","name":null,"original":{"line":122,"column":11},"generated":{"line":1,"column":1356}},{"source":"src/Image.js","name":null,"original":{"line":122,"column":19},"generated":{"line":1,"column":1362}},{"source":"src/Image.js","name":null,"original":{"line":122,"column":30},"generated":{"line":1,"column":1364}},{"source":"src/Image.js","name":null,"original":{"line":122,"column":30},"generated":{"line":1,"column":1372}},{"source":"src/Image.js","name":null,"original":{"line":123,"column":11},"generated":{"line":1,"column":1380}},{"source":"src/Image.js","name":null,"original":{"line":123,"column":11},"generated":{"line":1,"column":1385}},{"source":"src/Image.js","name":null,"original":{"line":124,"column":11},"generated":{"line":1,"column":1395}},{"source":"src/Image.js","name":null,"original":{"line":124,"column":11},"generated":{"line":1,"column":1400}},{"source":"src/Image.js","name":null,"original":{"line":124,"column":30},"generated":{"line":1,"column":1419}},{"source":"src/Image.js","name":null,"original":{"line":124,"column":36},"generated":{"line":1,"column":1424}},{"source":"src/Image.js","name":null,"original":{"line":124,"column":41},"generated":{"line":1,"column":1429}},{"source":"src/Image.js","name":null,"original":{"line":125,"column":11},"generated":{"line":1,"column":1435}},{"source":"src/Image.js","name":null,"original":{"line":125,"column":11},"generated":{"line":1,"column":1440}},{"source":"src/Image.js","name":null,"original":{"line":125,"column":23},"generated":{"line":1,"column":1450}},{"source":"src/Image.js","name":null,"original":{"line":126,"column":8},"generated":{"line":1,"column":1452}},{"source":"src/Image.js","name":null,"original":{"line":126,"column":13},"generated":{"line":1,"column":1457}},{"source":"src/Image.js","name":null,"original":{"line":127,"column":8},"generated":{"line":1,"column":1464}},{"source":"src/Image.js","name":null,"original":{"line":127,"column":13},"generated":{"line":1,"column":1469}},{"source":"src/Image.js","name":null,"original":{"line":127,"column":30},"generated":{"line":1,"column":1486}},{"source":"src/Image.js","name":null,"original":{"line":127,"column":35},"generated":{"line":1,"column":1491}},{"source":"src/Image.js","name":null,"original":{"line":128,"column":8},"generated":{"line":1,"column":1497}},{"source":"src/Image.js","name":null,"original":{"line":128,"column":13},"generated":{"line":1,"column":1502}},{"source":"src/Image.js","name":null,"original":{"line":128,"column":31},"generated":{"line":1,"column":1520}},{"source":"src/Image.js","name":null,"original":{"line":128,"column":36},"generated":{"line":1,"column":1525}},{"source":"src/Image.js","name":null,"original":{"line":136,"column":2},"generated":{"line":1,"column":1534}},{"source":"src/Image.js","name":null,"original":{"line":136,"column":2},"generated":{"line":1,"column":1536}},{"source":"src/Image.js","name":null,"original":{"line":136,"column":2},"generated":{"line":1,"column":1546}},{"source":"src/Image.js","name":null,"original":{"line":136,"column":2},"generated":{"line":1,"column":1555}},{"source":"src/Image.js","name":null,"original":{"line":136,"column":11},"generated":{"line":1,"column":1564}},{"source":"src/Image.js","name":null,"original":{"line":137,"column":9},"generated":{"line":1,"column":1567}},{"source":"src/Image.js","name":null,"original":{"line":137,"column":9},"generated":{"line":1,"column":1572}},{"source":"src/Image.js","name":null,"original":{"line":137,"column":18},"generated":{"line":1,"column":1579}},{"source":"src/Image.js","name":null,"original":{"line":145,"column":2},"generated":{"line":1,"column":1582}},{"source":"src/Image.js","name":null,"original":{"line":145,"column":2},"generated":{"line":1,"column":1584}},{"source":"src/Image.js","name":null,"original":{"line":145,"column":2},"generated":{"line":1,"column":1594}},{"source":"src/Image.js","name":null,"original":{"line":145,"column":2},"generated":{"line":1,"column":1609}},{"source":"src/Image.js","name":null,"original":{"line":146,"column":8},"generated":{"line":1,"column":1620}},{"source":"src/Image.js","name":null,"original":{"line":146,"column":13},"generated":{"line":1,"column":1625}},{"source":"src/Image.js","name":null,"original":{"line":147,"column":11},"generated":{"line":1,"column":1637}},{"source":"src/Image.js","name":null,"original":{"line":147,"column":11},"generated":{"line":1,"column":1642}},{"source":"src/Image.js","name":null,"original":{"line":148,"column":11},"generated":{"line":1,"column":1654}},{"source":"src/Image.js","name":null,"original":{"line":148,"column":11},"generated":{"line":1,"column":1659}},{"source":"src/Image.js","name":null,"original":{"line":148,"column":23},"generated":{"line":1,"column":1669}},{"source":"src/Image.js","name":null,"original":{"line":151,"column":0},"generated":{"line":1,"column":1676}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":1678}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":27},"generated":{"line":1,"column":1679}},{"source":"src/Image.js","name":null,"original":{"line":31,"column":0},"generated":{"line":1,"column":1681}},{"source":"src/Image.js","name":null,"original":{"line":159,"column":6},"generated":{"line":1,"column":1690}},{"source":"src/Image.js","name":null,"original":{"line":159,"column":16},"generated":{"line":1,"column":1699}},{"source":"src/Image.js","name":null,"original":{"line":159,"column":28},"generated":{"line":1,"column":1701}},{"source":"src/Image.js","name":null,"original":{"line":159,"column":35},"generated":{"line":1,"column":1703}},{"source":"src/Image.js","name":null,"original":{"line":159,"column":48},"generated":{"line":1,"column":1705}},{"source":"src/Image.js","name":null,"original":{"line":160,"column":8},"generated":{"line":1,"column":1708}},{"source":"src/Image.js","name":null,"original":{"line":160,"column":8},"generated":{"line":1,"column":1712}},{"source":"src/Image.js","name":null,"original":{"line":160,"column":47},"generated":{"line":1,"column":1714}},{"source":"src/Image.js","name":null,"original":{"line":162,"column":6},"generated":{"line":1,"column":1716}},{"source":"src/Image.js","name":null,"original":{"line":162,"column":6},"generated":{"line":1,"column":1719}},{"source":"src/Image.js","name":null,"original":{"line":162,"column":10},"generated":{"line":1,"column":1721}},{"source":"src/Image.js","name":null,"original":{"line":162,"column":17},"generated":{"line":1,"column":1726}},{"source":"src/Image.js","name":null,"original":{"line":162,"column":2},"generated":{"line":1,"column":1728}},{"source":"src/Image.js","name":null,"original":{"line":162,"column":31},"generated":{"line":1,"column":1741}},{"source":"src/Image.js","name":null,"original":{"line":163,"column":10},"generated":{"line":1,"column":1742}},{"source":"src/Image.js","name":null,"original":{"line":163,"column":10},"generated":{"line":1,"column":1746}},{"source":"src/Image.js","name":null,"original":{"line":163,"column":20},"generated":{"line":1,"column":1748}},{"source":"src/Image.js","name":null,"original":{"line":163,"column":24},"generated":{"line":1,"column":1750}},{"source":"src/Image.js","name":null,"original":{"line":164,"column":8},"generated":{"line":1,"column":1759}},{"source":"src/Image.js","name":null,"original":{"line":164,"column":20},"generated":{"line":1,"column":1762}},{"source":"src/Image.js","name":null,"original":{"line":183,"column":11},"generated":{"line":1,"column":1764}},{"source":"src/Image.js","name":null,"original":{"line":168,"column":4},"generated":{"line":1,"column":1771}},{"source":"src/Image.js","name":null,"original":{"line":168,"column":12},"generated":{"line":1,"column":1773}},{"source":"src/Image.js","name":null,"original":{"line":168,"column":17},"generated":{"line":1,"column":1778}},{"source":"src/Image.js","name":null,"original":{"line":169,"column":10},"generated":{"line":1,"column":1789}},{"source":"src/Image.js","name":null,"original":{"line":170,"column":8},"generated":{"line":1,"column":1792}},{"source":"src/Image.js","name":null,"original":{"line":172,"column":7},"generated":{"line":1,"column":1798}},{"source":"src/Image.js","name":null,"original":{"line":172,"column":13},"generated":{"line":1,"column":1804}},{"source":"src/Image.js","name":null,"original":{"line":172,"column":22},"generated":{"line":1,"column":1813}},{"source":"src/Image.js","name":null,"original":{"line":173,"column":10},"generated":{"line":1,"column":1816}},{"source":"src/Image.js","name":null,"original":{"line":176,"column":27},"generated":{"line":1,"column":1820}},{"source":"src/Image.js","name":null,"original":{"line":176,"column":12},"generated":{"line":1,"column":1838}},{"source":"src/Image.js","name":null,"original":{"line":176,"column":18},"generated":{"line":1,"column":1840}},{"source":"src/Image.js","name":null,"original":{"line":176,"column":64},"generated":{"line":1,"column":1846}},{"source":"src/Image.js","name":null,"original":{"line":176,"column":46},"generated":{"line":1,"column":1870}},{"source":"src/Image.js","name":null,"original":{"line":176,"column":52},"generated":{"line":1,"column":1872}},{"source":"src/Image.js","name":null,"original":{"line":177,"column":10},"generated":{"line":1,"column":1880}},{"source":"src/Image.js","name":null,"original":{"line":179,"column":10},"generated":{"line":1,"column":1884}},{"source":"src/Image.js","name":null,"original":{"line":165,"column":21},"generated":{"line":1,"column":1891}},{"source":"src/Image.js","name":null,"original":{"line":166,"column":6},"generated":{"line":1,"column":1902}},{"source":"src/Image.js","name":null,"original":{"line":166,"column":18},"generated":{"line":1,"column":1905}},{"source":"src/Image.js","name":null,"original":{"line":186,"column":8},"generated":{"line":1,"column":1908}},{"source":"src/Image.js","name":null,"original":{"line":186,"column":8},"generated":{"line":1,"column":1912}},{"source":"src/Image.js","name":null,"original":{"line":186,"column":23},"generated":{"line":1,"column":1914}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":4},"generated":{"line":1,"column":1916}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":15},"generated":{"line":1,"column":1918}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":15},"generated":{"line":1,"column":1920}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":15},"generated":{"line":1,"column":1932}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":20},"generated":{"line":1,"column":1934}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":30},"generated":{"line":1,"column":1936}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":30},"generated":{"line":1,"column":1944}},{"source":"src/Image.js","name":null,"original":{"line":187,"column":36},"generated":{"line":1,"column":1949}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":4},"generated":{"line":1,"column":1953}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":15},"generated":{"line":1,"column":1955}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":15},"generated":{"line":1,"column":1957}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":15},"generated":{"line":1,"column":1969}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":20},"generated":{"line":1,"column":1971}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":30},"generated":{"line":1,"column":1973}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":30},"generated":{"line":1,"column":1981}},{"source":"src/Image.js","name":null,"original":{"line":188,"column":37},"generated":{"line":1,"column":1987}},{"source":"src/Image.js","name":null,"original":{"line":190,"column":9},"generated":{"line":1,"column":1991}},{"source":"src/Image.js","name":null,"original":{"line":190,"column":9},"generated":{"line":1,"column":1998}},{"source":"src/Image.js","name":null,"original":{"line":191,"column":4},"generated":{"line":1,"column":2009}},{"source":"src/Image.js","name":null,"original":{"line":191,"column":17},"generated":{"line":1,"column":2011}},{"source":"src/Image.js","name":null,"original":{"line":191,"column":25},"generated":{"line":1,"column":2019}},{"source":"src/Image.js","name":null,"original":{"line":191,"column":4},"generated":{"line":1,"column":2021}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":2037}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":2041}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":2043}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":2045}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":2053}},{"source":"src/Image.js","name":null,"original":{"line":196,"column":15},"generated":{"line":1,"column":2061}}],"sources":{"src/Image.js":"/**\n * @module ol/Image\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\nimport {IMAGE_DECODE} from './has.js';\n\n\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string): void} LoadFunction\n * @api\n */\n\n\nclass ImageWrapper extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {LoadFunction} imageLoadFunction Image load function.\n   */\n  constructor(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageLoadFunction_(this, this.src_);\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image element.\n * @param {function():any} loadHandler Load callback function.\n * @param {function():any} errorHandler Error callback function.\n * @return {function():void} Callback to stop listening.\n */\nexport function listenImage(image, loadHandler, errorHandler) {\n  const img = /** @type {HTMLImageElement} */ (image);\n\n  if (img.src && IMAGE_DECODE) {\n    const promise = img.decode();\n    let listening = true;\n    const unlisten = function() {\n      listening = false;\n    };\n    promise.then(function() {\n      if (listening) {\n        loadHandler();\n      }\n    }).catch(function(error) {\n      if (listening) {\n        // FIXME: Unconditionally call errorHandler() when this bug is fixed upstream:\n        //        https://bugs.webkit.org/show_bug.cgi?id=198527\n        if (error.name === 'EncodingError' && error.message === 'Invalid image type.') {\n          loadHandler();\n        } else {\n          errorHandler();\n        }\n      }\n    });\n    return unlisten;\n  }\n\n  const listenerKeys = [\n    listenOnce(img, EventType.LOAD, loadHandler),\n    listenOnce(img, EventType.ERROR, errorHandler)\n  ];\n  return function unlisten() {\n    listenerKeys.forEach(unlistenByKey);\n  };\n}\n\n\nexport default ImageWrapper;\n"},"lineCount":null}},"error":null,"hash":"a30cfb00ff707dea757c3bd7a89814e9","cacheData":{"env":{}}}